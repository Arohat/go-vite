package quota

import (
	"math/big"
)

const (
	quotaForCreateContract uint64 = 1000000 // Quota limit for create contract.
	quotaLimitForBlock     uint64 = 1000000 // Quota limit for single block
	quotaForSection        uint64 = 21000
	quotaLimitForAccount          = 74025000

	precForFloat  uint   = 64
	maxWaitHeight uint64 = 75
)

type QuotaParams struct {
	paramA *big.Float // Quota param of pledge amount
	paramB *big.Float // Quota param of PoW difficulty
}

func NewQuotaParams(strA, strB string) QuotaParams {
	paramA, _ := new(big.Float).SetPrec(precForFloat).SetString(strA)
	paramB, _ := new(big.Float).SetPrec(precForFloat).SetString(strB)
	return QuotaParams{paramA, paramB}
}

var (
	sectionStrList = []string{
		"0",
		"0.042006175634155006",
		"0.08404944434245186",
		"0.1261670961035256",
		"0.16839681732546105",
		"0.2107768956769977",
		"0.25334643304410037",
		"0.2961455696376917",
		"0.3392157225669637",
		"0.382599842575369",
		"0.4263426931297194",
		"0.4704911566788094",
		"0.5150945736855665",
		"0.5602051210238872",
		"0.605878237567604",
		"0.6521731063496397",
		"0.6991532046201573",
		"0.7468869355972497",
		"0.7954483588344243",
		"0.8449180401302736",
		"0.8953840470548413",
		"0.9469431228444231",
		"0.9997020801479394",
		"1.053779467629503",
		"1.1093075777848576",
		"1.1664348850068706",
		"1.2253290311060194",
		"1.286180514353531",
		"1.3492072924575544",
		"1.4146605870070175",
		"1.4828322881625378",
		"1.554064521717701",
		"1.6287621852605034",
		"1.707409634545938",
		"1.7905932883378723",
		"1.8790328663947373",
		"1.97362554890186",
		"2.0755100566945326",
		"2.186162517630361",
		"2.3075451472522963",
		"2.4423470353692043",
		"2.594395323511559",
		"2.7694056956796604",
		"2.976475888792767",
		"3.2314282909393213",
		"3.5656840708200748",
		"4.057395776090949",
		"5.029431885090279",
	}
	QuotaParamMainnet       = NewQuotaParams("4.201037667e-06", "6.259408129e-10")
	QuotaParamTestnet       = NewQuotaParams("0.004667352848", "6.409829346e-07")
	pledgeAmountListMainnet = []*big.Int{
		big.NewInt(0),
		big.NewInt(10000),
		big.NewInt(20007),
		big.NewInt(30033),
		big.NewInt(40085),
		big.NewInt(50173),
		big.NewInt(60306),
		big.NewInt(70494),
		big.NewInt(80746),
		big.NewInt(91073),
		big.NewInt(101486),
		big.NewInt(111995),
		big.NewInt(122612),
		big.NewInt(133350),
		big.NewInt(144222),
		big.NewInt(155241),
		big.NewInt(166424),
		big.NewInt(177787),
		big.NewInt(189346),
		big.NewInt(201122),
		big.NewInt(213135),
		big.NewInt(225407),
		big.NewInt(237966),
		big.NewInt(250838),
		big.NewInt(264056),
		big.NewInt(277654),
		big.NewInt(291673),
		big.NewInt(306158),
		big.NewInt(321161),
		big.NewInt(336741),
		big.NewInt(352969),
		big.NewInt(369924),
		big.NewInt(387705),
		big.NewInt(406426),
		big.NewInt(426227),
		big.NewInt(447279),
		big.NewInt(469795),
		big.NewInt(494048),
		big.NewInt(520387),
		big.NewInt(549280),
		big.NewInt(581368),
		big.NewInt(617561),
		big.NewInt(659220),
		big.NewInt(708510),
		big.NewInt(769198),
		big.NewInt(848763),
		big.NewInt(965808),
		big.NewInt(1197189),
	}
	pledgeAmountListTestnet = []*big.Int{
		big.NewInt(0),
		big.NewInt(10),
		big.NewInt(19),
		big.NewInt(28),
		big.NewInt(37),
		big.NewInt(46),
		big.NewInt(55),
		big.NewInt(64),
		big.NewInt(73),
		big.NewInt(82),
		big.NewInt(92),
		big.NewInt(101),
		big.NewInt(111),
		big.NewInt(121),
		big.NewInt(130),
		big.NewInt(140),
		big.NewInt(150),
		big.NewInt(161),
		big.NewInt(171),
		big.NewInt(182),
		big.NewInt(192),
		big.NewInt(203),
		big.NewInt(215),
		big.NewInt(226),
		big.NewInt(238),
		big.NewInt(250),
		big.NewInt(263),
		big.NewInt(276),
		big.NewInt(290),
		big.NewInt(304),
		big.NewInt(318),
		big.NewInt(333),
		big.NewInt(349),
		big.NewInt(366),
		big.NewInt(384),
		big.NewInt(403),
		big.NewInt(423),
		big.NewInt(445),
		big.NewInt(469),
		big.NewInt(495),
		big.NewInt(524),
		big.NewInt(556),
		big.NewInt(594),
		big.NewInt(638),
		big.NewInt(693),
		big.NewInt(764),
		big.NewInt(870),
		big.NewInt(1078),
	}
	difficultyListMainnet = []*big.Int{
		big.NewInt(0),
		big.NewInt(67108863),
		big.NewInt(134276984),
		big.NewInt(201563940),
		big.NewInt(269029937),
		big.NewInt(336736144),
		big.NewInt(404745030),
		big.NewInt(473120723),
		big.NewInt(541929390),
		big.NewInt(611239649),
		big.NewInt(681123015),
		big.NewInt(751654385),
		big.NewInt(822912588),
		big.NewInt(894980979),
		big.NewInt(967948128),
		big.NewInt(1041908585),
		big.NewInt(1116963762),
		big.NewInt(1193222938),
		big.NewInt(1270804432),
		big.NewInt(1349836954),
		big.NewInt(1430461202),
		big.NewInt(1512831730),
		big.NewInt(1597119184),
		big.NewInt(1683512956),
		big.NewInt(1772224394),
		big.NewInt(1863490703),
		big.NewInt(1957579704),
		big.NewInt(2054795738),
		big.NewInt(2155487012),
		big.NewInt(2260054878),
		big.NewInt(2368965656),
		big.NewInt(2482765926),
		big.NewInt(2602102550),
		big.NewInt(2727749333),
		big.NewInt(2860643134),
		big.NewInt(3001933774),
		big.NewInt(3153054584),
		big.NewInt(3315824778),
		big.NewInt(3492602612),
		big.NewInt(3686522911),
		big.NewInt(3901881752),
		big.NewInt(4144793358),
		big.NewInt(4424389078),
		big.NewInt(4755203412),
		big.NewInt(5162514130),
		big.NewInt(5696519539),
		big.NewInt(6482075769),
		big.NewInt(8034995932),
	}
	difficultyListTestnet = []*big.Int{
		big.NewInt(0),
		big.NewInt(65534),
		big.NewInt(131126),
		big.NewInt(196834),
		big.NewInt(262717),
		big.NewInt(328834),
		big.NewInt(395247),
		big.NewInt(462018),
		big.NewInt(529212),
		big.NewInt(596896),
		big.NewInt(665139),
		big.NewInt(734016),
		big.NewInt(803602),
		big.NewInt(873979),
		big.NewInt(945234),
		big.NewInt(1017458),
		big.NewInt(1090752),
		big.NewInt(1165222),
		big.NewInt(1240983),
		big.NewInt(1318160),
		big.NewInt(1396893),
		big.NewInt(1477330),
		big.NewInt(1559640),
		big.NewInt(1644006),
		big.NewInt(1730636),
		big.NewInt(1819760),
		big.NewInt(1911641),
		big.NewInt(2006576),
		big.NewInt(2104904),
		big.NewInt(2207018),
		big.NewInt(2313373),
		big.NewInt(2424503),
		big.NewInt(2541039),
		big.NewInt(2663737),
		big.NewInt(2793512),
		big.NewInt(2931487),
		big.NewInt(3079061),
		big.NewInt(3238012),
		big.NewInt(3410641),
		big.NewInt(3600011),
		big.NewInt(3810316),
		big.NewInt(4047527),
		big.NewInt(4320561),
		big.NewInt(4643612),
		big.NewInt(5041364),
		big.NewInt(5562838),
		big.NewInt(6329960),
		big.NewInt(7846437),
	}
)
